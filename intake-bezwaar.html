<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<title>Bezwaar starten | ZekerOpWeg</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="css/styles.css">
</head>

<body class="fade-in">
<section class="container">

<h1>Bezwaar starten</h1>
<p>Vul hieronder uw gegevens in. Wij starten direct uw bezwaarprocedure.</p>

<form id="bezwaarForm">

  <input name="naam" placeholder="Naam" required>
  <input name="email" placeholder="E-mail" required>
  <input name="kenteken" placeholder="Kenteken" required>
  <input name="beschikking" placeholder="Beschikkingsnummer" required>
  <input name="type" placeholder="Overtreding (bijv. rood licht)" required>

  <!-- token komt automatisch -->
  <input type="hidden" name="token" value="TEST-PEPIJN">

  <div class="form-group">
    <label>Toelichting bij deze boete (optioneel)</label>
    <textarea name="toelichting" rows="5"
      placeholder="Bijvoorbeeld: ik was aan het lossen / ik was niet de bestuurder / bord ontbrak / etc."></textarea>
  </div>

  <button type="submit" class="btn-primary">Bezwaar starten</button>
</form>

<div id="apiResult" style="margin-top:1.5rem;font-weight:600;"></div>
</section>

<script>
document.getElementById("bezwaarForm").addEventListener("submit", async function(e){
  e.preventDefault();

  const data = Object.fromEntries(new FormData(this).entries());

  const r = await fetch("https://script.google.com/macros/s/AKfycbyAj0gwQHRudMaf4HGhaVgOlq7YR5LrhhetRVNTSSnkF_GCZeujMCxPXi2S0SE-jfR79w/exec", {
    method: "POST",
    body: new URLSearchParams(data)
  });

  const t = await r.text();
  document.getElementById("apiResult").innerText = t.startsWith("OK|")
    ? "Dossier aangemaakt: " + t.split("|")[1]
    : t;
});
</script>

</body>
</html>


