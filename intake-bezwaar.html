<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <title>Bezwaar starten | ZekerOpWeg</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="css/styles.css">
</head>

<body class="fade-in">

<section class="container">

  <h1>Bezwaar starten</h1>
  <p>Vul hieronder uw gegevens in. Wij starten direct uw bezwaarprocedure.</p>

  <form id="bezwaarForm">

    <input name="naam" placeholder="Naam" required>
    <input name="email" placeholder="E-mail" required>
    <input name="kenteken" placeholder="Kenteken" required>
    <input name="beschikking" placeholder="Beschikkingsnummer" required>
    <input name="type" placeholder="Overtreding (bijv. rood licht)" required>

    <div class="form-group">
      <label for="toelichting">Toelichting bij deze boete (optioneel)</label>
      <textarea id="toelichting" name="toelichting" rows="5"
        placeholder="Bijvoorbeeld: ik was aan het lossen / ik was niet de bestuurder / bord ontbrak / etc."></textarea>
    </div>

    <input type="hidden" name="token" value="TESTTOKEN123">

    <button type="submit" class="btn-primary">Bezwaar starten</button>
  </form>

  <div id="apiResult" style="margin-top:1.5rem;"></div>

</section>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbwvUilndRmg-sGr-xd-E1CspfsgdnyiiXn3d-XcuIbvsPj6fu09QLbg33Xx-m-sng0cuA/exec";

document.getElementById("bezwaarForm").addEventListener("submit", async function(e){
  e.preventDefault();

  const f = this;
  const data = {
    naam: f.naam.value,
    email: f.email.value,
    kenteken: f.kenteken.value,
    beschikking: f.beschikking.value,
    type: f.type.value,
    toelichting: f.toelichting.value,
    token: f.token.value
  };

  document.getElementById("apiResult").innerText = "Bezig met verzenden...";

  const r = await fetch(API_URL, {
    method: "POST",
    body: JSON.stringify(data)
  });

  const t = await r.text();

  if (t.startsWith("OK|")) {
    const d = t.split("|")[1];
    document.getElementById("apiResult").innerHTML =
      "Uw dossier is succesvol aangemaakt.<br><strong>Dossiernummer: " + d + "</strong>";
    f.reset();
  } else {
    document.getElementById("apiResult").innerText = "‚ùå " + t;
  }
});
</script>

</body>
</html>


