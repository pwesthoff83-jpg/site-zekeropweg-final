<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<title>Bezwaar starten | ZekerOpWeg</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="css/styles.css">
</head>

<body class="fade-in">
<section class="container">

<div class="contact-card">

<h2>Bezwaar starten</h2>
<p>Upload uw boete en wij starten automatisch uw juridische dossier.</p>

<form id="bezwaarForm" enctype="multipart/form-data">

<input name="naam" placeholder="Naam" required>
<input name="email" placeholder="E-mail" required>
<input name="kenteken" placeholder="Kenteken" required>
<input name="beschikking" placeholder="Beschikkingsnummer" required>
<input name="type" placeholder="Overtreding (bijv. parkeren)" required>
<input name="token" placeholder="Abonnementscode" required>

<textarea name="toelichting" rows="5" placeholder="Uw toelichting (optioneel)"></textarea>

<label class="upload-btn">
Upload boete (PDF of foto)
<input type="file" name="boete" accept=".pdf,image/*" required>
</label>

<button class="btn-primary">Bezwaar starten</button>

</form>

<div id="apiResult"></div>
</div>

<script>
window.addEventListener("DOMContentLoaded", () => {

  const form = document.getElementById("bezwaarForm");
  const result = document.getElementById("apiResult");

  if (!form) {
    console.error("FORM NOT FOUND");
    return;
  }

  form.addEventListener("submit", async (e) => {
    e.preventDefault();
    result.innerHTML = "⏳ Dossier wordt aangemaakt...";

    const fd = new FormData(form);

    try {
      const r = await fetch("<script>
window.addEventListener("DOMContentLoaded", () => {

  const form = document.getElementById("bezwaarForm");
  const result = document.getElementById("apiResult");

  if (!form) {
    console.error("FORM NOT FOUND");
    return;
  }

  form.addEventListener("submit", async (e) => {
    e.preventDefault();
    result.innerHTML = "⏳ Dossier wordt aangemaakt...";

    const fd = new FormData(form);

    try {
      const r = await fetch("https://script.google.com/macros/s/AKfycbwXCX_5Z8heD-HkkMsxQHBbGZXFup-SU5DBO9_A6Lpg1Yy_GamUdMEgsRpnrQREjUq8Zw/exec", {
        method: "POST",
        body: fd
      });

      const t = await r.text();
      result.innerHTML = t;

    } catch (err) {
      console.error(err);
      result.innerHTML = "❌ Verbindingsfout";
    }
  });
});
</script>
", {
        method: "POST",
        body: fd
      });

      const t = await r.text();
      result.innerHTML = t;

    } catch (err) {
      console.error(err);
      result.innerHTML = "❌ Verbindingsfout";
    }
  });
});
</script>


</section>
</body>
</html>



