<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<title>Bezwaar starten | ZekerOpWeg</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="css/styles.css">
</head>

<body class="fade-in">
<section class="container">
<div class="contact-card">

<h2>Bezwaar starten</h2>
<p>Upload uw boete en wij starten automatisch uw juridische dossier.</p>

<form id="bezwaarForm">
  <input name="naam" required placeholder="Naam">
  <input name="email" required placeholder="E-mail">
  <input name="kenteken" required placeholder="Kenteken">
  <input name="beschikking" required placeholder="Beschikkingsnummer">
  <input name="type" required placeholder="Overtreding">
  <input name="token" required placeholder="Abonnementscode">
  <textarea name="toelichting" rows="4" placeholder="Uw toelichting (optioneel)"></textarea>
  <input type="file" id="boete" required accept=".pdf,image/*">
  <button class="btn-primary">Bezwaar starten</button>
</form>

<div id="apiResult"></div>
</div>

<script>
const API = "https://script.google.com/macros/s/AKfycbwhztm9vHKd1LLGmb3JxGjS8Ps90XzYc0SV7_fZI-Vz3BZOfrkvfCvCFT8vgH30UfBUVQ/exec";

document.getElementById("bezwaarForm").addEventListener("submit", async e => {
  e.preventDefault();
  const result = document.getElementById("apiResult");
  result.innerHTML = "â³ Dossier wordt aangemaakt...";

  const file = document.getElementById("boete").files[0];
  const reader = new FileReader();

  reader.onload = async () => {
    const data = Object.fromEntries(new FormData(e.target));
    data.filename = file.name;
    data.filedata = reader.result.split(",")[1];

    const r = await fetch(API, {
      method:"POST",
      headers:{ "Content-Type":"application/json" },
      body: JSON.stringify(data)
    });

    result.innerHTML = await r.text();
  };

  reader.readAsDataURL(file);
});
</script>

  
</section>
</body>
</html>


